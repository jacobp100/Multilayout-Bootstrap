var multilayout={};if(!$.ui){multilayout.focusable=function focusable(c,a){var e,d,b,f=c.nodeName.toLowerCase();if(f==="area"){e=c.parentNode;d=e.name;if(!c.href||!d||e.nodeName.toLowerCase()!=="map"){return false}b=$("img[usemap='#"+d+"']")[0];return !!b&&multilayout.visible(b)}return(/input|select|textarea|button|object/.test(f)?!c.disabled:"a"===f?c.href||a:a)&&multilayout.visible(c)};multilayout.visible=function visible(a){return $.expr.filters.visible(a)&&!$(a).parents().addBack().filter(function(){return $.css(this,"visibility")==="hidden"}).length};$.extend($.expr[":"],{focusable:function(a){return multilayout.focusable(a,!isNaN($.attr(a,"tabindex")))}})}$.currentFragment=0;$.changeUrlWithFragment=true;$.changeFragment=function(c,b,d){$.currentFragment=c;$(".fragment").removeClass("visible");var g=$("[data-fragment-order="+$.currentFragment+"]");g.addClass("visible").scrollTop(0);var e=g.find(".active:not(tr):focusable, .active:not(tr) :focusable");if(e.length>0){e.first().focus()}else{g.find(":focusable").first().focus()}$(".navbar-back").toggleClass("visible",$.currentFragment!==0);if($.changeUrlWithFragment&&window.history.pushState){var f=$.unparam();f.fragment=c;if(b){f["fragment-view"]=b}else{if(f["fragment-view"]){delete f["fragment-view"]}}var a=window.location.protocol+"//"+window.location.host+window.location.pathname+"?"+$.param(f);window.history.pushState({path:a},"",a)}if(b!==undefined||d!==undefined){$(document).trigger("viewChanged",[c,b,d])}};$.unparam=function(){var a=location.search.substring(1);try{return JSON.parse('{"'+decodeURI(a).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}')}catch(b){return{}}};$.fn.extend({changeFragment:function(a){$.changeFragment(a,this.data("fragment-view"),this)},fragmentLink:function(){this.on("click",function(){var a=$(this);a.changeFragment(a.data("change-fragment"));return false})}});$(function(){function a(c){c=c.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+c+"=([^&#]*)"),d=e.exec(location.search);return d===null?undefined:decodeURIComponent(d[1].replace(/\+/g," "))}$("[data-change-fragment]").fragmentLink();$(".navbar-back").on("click",function(){$.changeFragment($.currentFragment-1);return false});var b=$.unparam();if(b.fragment){$.changeFragment(Number(b.fragment),b.view)}else{$.changeFragment(Number($(".fragment.visible").first().data("fragment-order"))||0)}});
